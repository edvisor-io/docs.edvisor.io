<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Edvisor.io API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0" y="0" viewBox="0 0 247 47" enable-background="new 0 0 247 47" xml:space="preserve">
        <path d="M0 46.3L10.3 1.3h26.4l-1.9 7.9H17.7l-2.4 10.6h13.6L27 27.7H13.5l-2.4 10.6h17.2l-1.8 7.9L0 46.3 0 46.3z"></path>
        <path d="M41.5 47c-3.1 0-5.5-1-7.1-3 -1.6-2-2.4-4.9-2.4-8.6s0.6-7.3 1.8-10.7c1.2-3.4 3.1-6.3 5.7-8.6 2.6-2.4 5.7-3.5 9.1-3.5 1.5 0 3.7 0.4 6.6 1.1l1.3 0.4L59.8 0h8.9L58 46.3h-8.6l0.6-3.4c-0.9 1-2.2 2-3.8 2.9C44.4 46.6 42.9 47 41.5 47zM55 20.9c-2.6-0.6-4.6-0.9-6.3-0.9 -1.6 0-3 0.9-4.2 2.6 -1.2 1.8-2.1 3.7-2.7 6.1C41.3 31 41 33.2 41 35.3c0 2.8 1.1 4.2 3.4 4.2 0.7 0 1.7-0.4 2.9-1.2s2.3-1.6 3.2-2.4l1.3-1.2L55 20.9z"></path>
        <path d="M69 13.2h8.7l-0.9 25.7H78l11.3-25.7h8.9L82.7 46.3H68.8L69 13.2z"></path>
        <path d="M95 46.3l7.6-33.1h8.8l-7.6 33.1H95zM103.3 9.7l2.1-9h8.9l-2.1 9H103.3z"></path>
        <path d="M127.4 20c-1.3 0-2.3 0.3-3 0.9 -0.7 0.6-1.1 1.3-1.1 2.2 0 0.8 0.3 1.4 0.9 1.8 0.6 0.4 2.2 1 4.8 1.8 2.6 0.8 4.5 1.7 5.8 2.7 1.3 1.1 2 2.7 2 5.1 0 4.1-1.4 7.3-4.1 9.4s-6.3 3.2-10.8 3.2c-1.9 0-3.8-0.2-5.7-0.6 -1.9-0.4-3.3-0.8-4.2-1.2l-1.5-0.5 1.7-6.5c4.2 0.8 7.9 1.2 11 1.2s4.6-1.1 4.6-3.2c0-0.6-0.3-1-0.9-1.4 -0.6-0.4-1.7-0.7-3.2-1.2 -3.1-0.9-5.5-1.9-6.9-3.1 -1.5-1.2-2.3-2.9-2.3-5.1 0-4.1 1.4-7.3 4-9.6 2.7-2.3 5.9-3.5 9.7-3.5 2.1 0 4.1 0.2 6.1 0.5 2 0.3 3.4 0.7 4.4 1l1.5 0.5 -1.6 6.6C134 20.4 130.3 20 127.4 20z"></path>
        <path d="M157.6 12.4c8.7 0 13 4.2 13 12.5 0 3.6-0.6 7-1.8 10.3 -1.2 3.3-3.1 6.1-5.7 8.4s-5.7 3.5-9.2 3.5c-8.7 0-13-4.1-13-12.5 0-3.5 0.7-7 1.9-10.3 1.3-3.3 3.2-6.1 5.9-8.4C151.3 13.6 154.2 12.4 157.6 12.4zM153.9 39.5c2.4 0 4.3-1.5 5.8-4.5 1.5-3 2.2-6.4 2.2-10.2 0-3.2-1.4-4.8-4.2-4.8 -2.4 0-4.3 1.5-5.8 4.5s-2.2 6.4-2.2 10.2C149.6 37.9 151.1 39.5 153.9 39.5z"></path>
        <path d="M170.3 46.3l7.6-33.1h8.8l-1.2 4.7c1.3-1.2 3-2.4 5.1-3.5s3.8-1.8 5.3-2l-2.6 9.2c-2.1 0.7-4.7 1.7-7.7 3l-1.6 0.7 -4.8 20.9L170.3 46.3 170.3 46.3z"></path>
        <path d="M186.6 46.3l2.3-10.1h9l-2.3 10.1H186.6z"></path>
        <path d="M199.7 46.3l7.6-33.1h8.8l-7.6 33.1H199.7zM208.1 9.7l2.1-9h8.9l-2.1 9H208.1z"></path>
        <path d="M232.9 12.4c8.7 0 13 4.2 13 12.5 0 3.6-0.6 7-1.8 10.3 -1.2 3.3-3.1 6.1-5.7 8.4s-5.7 3.5-9.2 3.5c-8.7 0-13-4.1-13-12.5 0-3.5 0.7-7 1.9-10.3s3.2-6.1 5.9-8.4C226.6 13.6 229.5 12.4 232.9 12.4zM229.2 39.5c2.4 0 4.3-1.5 5.8-4.5 1.5-3 2.2-6.4 2.2-10.2 0-3.2-1.4-4.8-4.2-4.8 -2.4 0-4.3 1.5-5.8 4.5s-2.2 6.4-2.2 10.2C224.9 37.9 226.4 39.5 229.2 39.5z"></path>
      </svg>

        <div class="lang-selector">
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.edvisor.io'>Sign Up for Edvisor.io</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>

<blockquote>
<p>Sample GraphQL Request:</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.edvisor.io/graphql
</code></pre>

<blockquote>
<p>Sample GraphQL Request Body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"query {
    student(studentId: 123) {
      firstname, 
      lastname, 
      email
    }
  }"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Welcome to the Edvisor.io GraphQL API! You can use this API to create, read, update, and delete commonly used objects in Edvisor.io.</p>

<p>This Edvisor.io API follows GraphQL (http://graphql.org/). </p>

<p>To access our API, please contact us at <a href='mailto:support@edvisor.io'>support@edvisor.io</a>.</p>

          <h1 id="integrations">Integrations</h1>

<p>An Edvisor Agency account manages information about students, staff tasks and reminders, quotes, invoices, products and services (courses, accommodations, add-ons, fees) offered by “connected” schools, products and services offered by the agency, and student registrations. </p>

<p>This document is provides an overview of the ways you can integrate with your edvisor agency account and the types of data you can push, pull, or synch with.  Most commonly, we see Edvisor Agency integrations with 3rd party CRMs (to make quoting and registering students more seamless), B2C Websites (to provide quoting or ecommerce functionality for students online), and accounting systems. </p>

<p>There are three ways to integrate with your Edvisor account. </p>

<h2 id="api-integration">API integration</h2>

<p>This method allows you to update data in your Edvisor account with changes in your external system by calling the Edvisor API.</p>

<p><img src='images/integration_agency_1.png'></p>

<h2 id="webhooks-integration">Webhooks integration</h2>

<p>This method allows you to update your external system with changes in your Edvisor account by registering a webhook and subscribing to the relevant events and implementing the necessary logic needed to handle the change event to update your existing system. </p>

<p><img src='images/integration_agency_2.png'></p>

<h2 id="api-and-webhooks-integration">API and Webhooks integration</h2>

<p>This method allows 2-way synchronization between your Edvisor account and your existing back-office system by combining Method 1 and Method 2.</p>

          <h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"https://api.edvisor.io/graphql"</span>
  -H <span class="s2">"Authorization: Bearer &lt;your_edvisor_api_key&gt;"</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">your_edvisor_api_key</code> with your API key.</p>
</blockquote>

<p>Edvisor.io uses API keys to allow access to the API. To access our API, please contact us at <a href='mailto:support@edvisor.io'>support@edvisor.io</a>.</p>

<p>Edvisor.io expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code class="prettyprint">Authorization: Bearer &lt;your_edvisor_api_key&gt;</code></p>

<aside class="notice">
You must replace <code>your_edvisor_api_key</code> with your API key.
</aside>

<aside class="warning">
It is your responsibility to not expose your Edvisor.io API key to the public. All requests to the Edvisor API should be made from your server and not a customer-facing front end.
</aside>

          <h1 id="webhooks">Webhooks</h1>

<h2 id="introduction">Introduction</h2>

<p>In addition to the available GraphQL API, Edvisor.io can register webhooks so you can 
synchronise the data in your agency account with an external service or system. When 
registering a webhook, you’re able to subscribe to specific events so that you only 
receive the events (synchronize the data) that you want. </p>

<p>For example, if you’d like keep the student information in your external CRM up-to-date with 
changes made to students in your Edvisor.io account, you can register a webhook that 
subscribes to the “student:update” event.  When a student is updated on Edvisor.io, we will 
then send the updated information to a pre-set URL.</p>

<p>Sample Webhook:</p>

<p>Webhook endpoint: <code class="prettyprint">https://api.your-agency.com/webhook/edvisor</code></p>

<p>Events subscribed: <code class="prettyprint">student:create</code>, <code class="prettyprint">student:update</code></p>

<p>What happens: When a student is updated or created, we will send a <code class="prettyprint">POST https://api.your-agency.com/webhook/edvisor</code> request with a body containing the changes that represent the event.</p>

<h2 id="responding-to-a-webhook">Responding to a webhook</h2>

<p>To acknowledge receipt of a webhook, your endpoint should return a 2xx HTTP status code. Any 
other information returned in the request headers or request body is ignored. All response 
codes outside this range, including 3xx codes, will indicate to Edvisor.io that you did not 
receive the webhook. This does mean that a URL redirection or a &ldquo;Not Modified&rdquo; response will 
be treated as a failure.</p>

<p>If a webhook is not successfully received for any reason, Edvisor.io will continue trying 
to send the webhook once every 15 minutes for up to 3 days. </p>

<h2 id="available-events">Available events</h2>

<h3 id="student">Student</h3>

<ul>
<li>student:create</li>
<li>student:update</li>
<li>student:delete</li>
</ul>

<h3 id="school-company">School Company</h3>

<ul>
<li>school:create</li>
<li>school:update</li>
<li>school:delete</li>
</ul>

<h3 id="campus">Campus</h3>

<ul>
<li>campus:create</li>
<li>campus:update</li>
<li>campus:delete</li>
</ul>

<h3 id="offering">Offering</h3>

<ul>
<li>offering:create</li>
<li>offering:update</li>
<li>offering:delete</li>
</ul>

<h3 id="start-date-template">Start Date Template</h3>

<ul>
<li>startDateTemplate:create</li>
<li>startDateTemplate:update</li>
<li>startDateTemplate:delete</li>
</ul>

<h3 id="student-quote">Student Quote</h3>

<ul>
<li>studentQuote:create</li>
<li>studentQuote:update</li>
</ul>

<h2 id="event-object">Event Object</h2>

<p>The event object that is sent along with the webhook request will be structured like the following:</p>

<blockquote>
<p>Sample Event object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-31T19:12:43.687Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"firstname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lastname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Garcia"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.garcia@education-agency.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"student:update"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"after"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"studentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frank@email.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"before"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"studentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>created</td>
<td>Timestamp of when this event occured</td>
</tr>
<tr>
<td>user</td>
<td>Information regarding the creator of this event</td>
</tr>
<tr>
<td>user.userId</td>
<td></td>
</tr>
<tr>
<td>user.firstname</td>
<td></td>
</tr>
<tr>
<td>user.lastname</td>
<td></td>
</tr>
<tr>
<td>user.email</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>Event name (ie. <code class="prettyprint">student:create</code>)</td>
</tr>
<tr>
<td>data</td>
<td></td>
</tr>
<tr>
<td>data.after</td>
<td>The object affected AFTER the event has taken place</td>
</tr>
<tr>
<td>data.before</td>
<td>the object BEFORE the event took place</td>
</tr>
</tbody></table>

          <h1 id="api">API</h1>

<p>You can view the full API documentation for our <a href='schema/'>GraphQL API here</a>. </p>

<p>Please note that we are currently using GraphQL which is quite different from typical RESTful API&rsquo;s. To learn
more about how to interact with a GraphQL API, please checkout <a href='http://graphql.org/'>http://graphql.org/</a>.</p>

<h3 id="queries">Queries</h3>

<p>A full list of all the available queries can be found here: <a href='http://docs.edvisor.io/schema/query.doc.html'>http://docs.edvisor.io/schema/query.doc.html</a></p>

<p>To access our API, please contact us at <a href='mailto:support@edvisor.io'>support@edvisor.io</a>.</p>

<h2 id="graphql-playground">GraphQL Playground</h2>

<p>You can test drive your GraphQL queries and mutations directly from here: <a href='https://www.graphqlbin.com/' target='_blank'>https://www.graphqlbin.com/</a>. When it prompts you to enter the endpoint URL please use <code class="prettyprint">https://api.edvisor.io/graphql</code></p>

<p><img src='images/step1.gif'>
<img src='images/step2.gif'></p>

<aside class="notice">
Please remember to set the &ldquo;Authorization&rdquo; header with your API key.
</aside>

<h2 id="accessing-the-price-of-a-course">Accessing the price of a course</h2>

<blockquote>
<p>The GraphQL query could look like this:</p>
</blockquote>
<pre class="highlight plaintext"><code>query {
  # lookup a specific offering
  offering(offeringId: 1) {
    # get the offeringCourse relationship
    offeringCourse {
      # get the prices specified by the filter
      prices(filter: {
        startDate: {
          eq: "2018-01-01"
        },
        durationTypeId: 3,
        durationAmount: {
          eq: 8
        },
        nationalityId: 29,
        age: {
          eq: 21
        },
        agencyCountryId: 29
      }) {
        # specify the fields we want to see returned
        durationAmount,
        durationType {
          codeName
        },
        startDate,
        currency {
          code
        },
        originalPrice,
        hasPromotion
      }
    }
  }
}
</code></pre>

<blockquote>
<p>You can copy and paste this cURL command to test it out!</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s1">'https://api.edvisor.io/graphql'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer &lt;your_edvisor_api_key&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"query":"query {\n  offering(offeringId: 417) {\n    offeringCourse {\n      prices(filter: {\n        startDate: {\n          eq: \"2018-01-01\"\n        }\n      }) {\n        durationAmount,\n        durationType {\n          codeName\n        },\n        startDate,\n        currency {\n          code\n        },\n        originalPrice,\n        hasPromotion\n      }\n    }\n  }\n}","variables":null}'</span> <span class="se">\</span>
  --compressed
</code></pre>

<p>A very common usage of the Edvisor API is to query for the pricing of a course.</p>

<p>This can be achieved easily with the <code class="prettyprint">prices</code></a> property on the <a href='http://docs.edvisor.io/schema/offeringcourse.doc.html'><code class="prettyprint">OfferingCourse</code></a> object. </p>

<p>You can read more about the parameters that the <code class="prettyprint">prices</code> property accepts here: <a href='http://docs.edvisor.io/schema/offeringcourse.doc.html'>http://docs.edvisor.io/schema/offeringcourse.doc.html</a></p>

<p>In the example to the left, we are using the root query <code class="prettyprint">offering</code> to find a specific offering, then traversing through the <code class="prettyprint">offeringCourse</code> relation to get to the <code class="prettyprint">prices</code> property. </p>

<p>You will notice that the <code class="prettyprint">prices</code> property takes in a <code class="prettyprint">filter</code> parameter which you can customize to meet your needs. You will notice that the <code class="prettyprint">prices</code> property will return a list of <code class="prettyprint">DerivedPrice</code> objects, which is described here: <a href='http://docs.edvisor.io/schema/derivedprice.doc.html'>http://docs.edvisor.io/schema/derivedprice.doc.html</a></p>

<h2 id="performing-a-search-for-courses">Performing a search for courses</h2>

<blockquote>
<p>The GraphQL query could look like this:</p>
</blockquote>
<pre class="highlight plaintext"><code>query {
  # use the offeringSearch query
  offeringSearch(filter: {
    # filter for only Courses (offeringTypeId = 1)
    offeringTypeIds: [1],
    durationTypeId: 3,
    durationAmount: {
      eq: 4
    },
    pagination: {
      limit: 10
    }
  }) {
    ... on OfferingCourseSearchResult {
      offering {
        name,
        school {
          name,
          schoolCompany {
            name
          }
        }
      }
        offeringId,
      durationAmount,
      durationType {
        codeName
      },
      price {
        originalPrice,
        currency {
          code
        }
      }
    }
  }
}
</code></pre>

<blockquote>
<p>You can copy and paste this cURL command to test it out!</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s1">'https://api.edvisor.io/graphql'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer &lt;your_edvisor_api_key&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"query":"query {\n  offeringSearch(filter: {\n    offeringTypeIds: [1],\n    durationTypeId: 3,\n    durationAmount: {\n      eq: 4\n    },\n    pagination: {\n      limit: 10\n    }\n  }) {\n    ... on OfferingCourseSearchResult {\n      offering {\n        name,\n        school {\n          name,\n          schoolCompany {\n            name\n          }\n        }\n      }\n    \tofferingId,\n      durationAmount,\n      durationType {\n        codeName\n      },\n      price {\n        originalPrice,\n        currency {\n          code\n        }\n      }\n      \n  \t}\n  }\n}","variables":null}'</span> <span class="se">\</span>
  --compressed
</code></pre>

<p>Our API currently exposes the ability to search for offerings matching specific search criteria. </p>

<p>You can use the <code class="prettyprint">offeringSearch</code> query to perform a search for matching offerings, and also fetch the prices! For more details on what criteria you can set in the filter, please visit our documentation on the <code class="prettyprint">OfferingSearchResultFilter</code> here: <a href='http://docs.edvisor.io/schema/offeringsearchresultfilter.doc.html'>http://docs.edvisor.io/schema/offeringsearchresultfilter.doc.html</a>. For more details on the result objects returned, please visit our documentation on the <code class="prettyprint">OfferingSearchResult</code> object here: <a href='http://docs.edvisor.io/schema/offeringsearchresult.doc.html'>http://docs.edvisor.io/schema/offeringsearchresult.doc.html</a></p>

<h2 id="exploring-your-connected-schools">Exploring your connected Schools</h2>

<blockquote>
<p>The GraphQL query could look like this:</p>
</blockquote>
<pre class="highlight plaintext"><code>query {
  # start by querying for your own AgencyCompany object
  agencyCompany {
    agencyCompanyId,
    name,
    # now fetch the connectedSchoolCompanies relation
    connectedSchoolCompanies {
      schoolCompanyId,
      name,
      schools {
        name,
        # here we are fetching all the courses related to your schools
        courses {
          offeringId,
          name
        }
      }
    }
  }
}
</code></pre>

<blockquote>
<p>You can copy and paste this cURL command to test it out!</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s1">'https://api.edvisor.io/graphql'</span> 
  -H <span class="s1">'Authorization: Bearer &lt;your_edvisor_api_key&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"query":"query {\n  agencyCompany {\n    agencyCompanyId,\n    name,\n    connectedSchoolCompanies {\n      schoolCompanyId,\n      name,\n      schools {\n        name,\n        courses {\n          offeringId,\n          name\n        }\n      }\n    }\n  }\n}","variables":null}'</span> 
  --compressed 
</code></pre>

<p>If you are an agency customer, you have full ability to explore the data of the schools you&rsquo;re connected to through our API.</p>

<p>To begin, we recommend you start with the <code class="prettyprint">agencyCompany</code> query which will return to you data on your own Agency account. From there you can traverse our API in GraphQL to the data of your connected schools.</p>

<h2 id="viewing-a-quote">Viewing a Quote</h2>

<blockquote>
<p>To fetch all the course information on a quote</p>
</blockquote>
<pre class="highlight plaintext"><code>query {
  studentQuote(studentQuoteId:1) {
    studentQuoteId
    studentQuoteOptions {
      studentQuoteOptionItems {
        __typename

        ... on StudentQuoteOptionCourseItem {
          offeringPriceItem {
            durationAmount
            durationType {
              codeName
            }
            startDate
            endDate
            priceAmount
            priceCurrency {
              code
            }
          }
          courseSnapshot {
            offeringCourseCategory {
              codeName
            }
            name
          }
        }
      }
    }
  }
}
</code></pre>

<blockquote>
<p>You can copy and paste this cURL command to test it out!</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s1">'https://api.edvisor.io/graphql'</span> 
  -H <span class="s1">'Authorization: Bearer &lt;your_edvisor_api_key&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"query":"query {\n  studentQuote(studentQuoteId:&lt;your_quote_id&gt;) {\n    studentQuoteId\n    studentQuoteOptions {\n      studentQuoteOptionItems {\n        __typename\n        \n        ... on StudentQuoteOptionCourseItem {\n          offeringPriceItem {\n            durationAmount\n            durationType {\n              codeName\n            }\n            startDate\n            endDate\n            priceAmount\n            priceCurrency {\n              code\n            }\n          }\n          courseSnapshot {\n            offeringCourseCategory {\n              codeName\n            }\n            name\n          }\n        }\n      }\n    }\n  }\n}","variables":null}'</span> 
  --compressed 
</code></pre>

<blockquote>
<p>To fetch all the fee information on a quote</p>
</blockquote>
<pre class="highlight plaintext"><code>query {
  studentQuote(studentQuoteId:1) {
    studentQuoteId
    studentQuoteOptions {
      studentQuoteOptionItems {
        __typename

        ... on StudentQuoteOptionFeeItem {
          appliedFeePriceItem {
            startDate
            endDate
            priceAmount
            priceCurrency {
              code
            }
          }
          feeSnapshot {
            name
          }
        }
      }
    }
  }
}
</code></pre>

<blockquote>
<p>You can copy and paste this cURL command to test it out!</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s1">'https://api.edvisor.io/graphql'</span> 
  -H <span class="s1">'Authorization: Bearer &lt;your_edvisor_api_key&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"query":"query {\n  studentQuote(studentQuoteId:&lt;your_quote_id&gt;) {\n    studentQuoteId\n    studentQuoteOptions {\n      studentQuoteOptionItems {\n        __typename\n        \n        ... on StudentQuoteOptionFeeItem {\n          appliedFeePriceItem {\n            startDate\n            endDate\n            priceAmount\n            priceCurrency {\n              code\n            }\n          }\n          feeSnapshot {\n            name\n          }\n        }\n      }\n    }\n  }\n}","variables":null}'</span> 
  --compressed 
</code></pre>

<p>As an agency customer, you can retrieve data on any of the quotes that you have previously created. Please see the example on the right.</p>

<p>The example to the right shows only how to fetch information for the courses and fees attached to your quote. There are many more objects that you can fetch in addition to course information. Please see the documentation on the following objects for a full description of what data is available to you:</p>

<ul>
<li><a href='http://docs.edvisor.io/schema/studentquoteoptioncourseitem.doc.html'>StudentQuoteOptionCourseItem</a></li>
<li><a href='http://docs.edvisor.io/schema/studentquoteoptionaccommodationitem.doc.html'>StudentQuoteOptionAccommodationItem</a></li>
<li><a href='http://docs.edvisor.io/schema/studentquoteoptionserviceitem.doc.html'>StudentQuoteOptionServiceItem</a></li>
<li><a href='http://docs.edvisor.io/schema/studentquoteoptionfeeitem.doc.html'>StudentQuoteOptionFeeItem</a></li>
<li><a href='http://docs.edvisor.io/schema/studentquoteoptiondiscountitem.doc.html'>StudentQuoteOptionDiscountItem</a></li>
</ul>

<h2 id="viewing-a-studentenrollment">Viewing a StudentEnrollment</h2>

<blockquote>
<p>To fetch all the salient details of a student enrollment</p>
</blockquote>
<pre class="highlight plaintext"><code>query {
  studentEnrollment(studentEnrollmentId: 1) {
    studentEnrollmentId
    agencyOwnerId
    sent
    studentEnrollmentOfferingItems {
      ... on StudentEnrollmentOfferingCourseItem {
        offeringTypeId
        courseSnapshot {
          offeringCourseCategory {
            offeringCourseCategoryId
            codeName
          }
          name
        }
      }
      ... on StudentEnrollmentOfferingCourseItem {
        accommodationSnapshot {
          bathroomType {
            bathroomTypeId
            codeName
          }
          offeringId
          offeringAccommodationCategoryId
          name
        }
      }
      ... on StudentEnrollmentOfferingServiceItem {
        offeringTypeId
        serviceSnapshot {
          offeringId
        }
      }
    }
  }
}
</code></pre>

<blockquote>
<p>You can copy and paste this cURL command to test it out!</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s1">'https://api.edvisor.io/graphql'</span> 
  -H <span class="s1">'Authorization: Bearer &lt;your_edvisor_api_key&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"query":"query {\n  studentQuote(studentQuoteId: 42157) {\n    studentQuoteId\n\n    studentQuoteOptions {\n      studentQuoteOptionId\n      \n      studentQuoteOptionItems {\n        ... on StudentQuoteOptionCourseItem {\n          studentQuoteOptionId\n        }\n      }\n    }\n  }\n  \n  studentEnrollment(studentEnrollmentId: 11722) {\n    studentEnrollmentId\n    studentEnrollmentStatusId\n    studentEnrollmentDecisionStatusId\n    schoolId\n    studentId\n    invoiceId\n    quoteId\n    languageId\n    obscuredId\n    studentSignature\n    signedDate\n    specialInstructions\n    created\n    modified\n    agencyOwnerId\n    schoolOwnerId\n    sent\n    isDeletedByAgency\n    isDeletedBySchool\n    studentEnrollmentOfferingItems {\n      ... on StudentEnrollmentOfferingAccommodationItem {\n        accommodationSnapshot {\n          offeringId\n          offeringAccommodationCategoryId\n          name\n        }\n      }\n      ... on StudentEnrollmentOfferingCourseItem {\n        offeringTypeId\n        studentEnrollmentOfferingItemId\n        courseSnapshot {\n          offeringId\n          offeringCourseCategoryId\n          name\n        }\n      }\n    }\n  }\n}","variables":null}'</span>
  --compressed 
</code></pre>

<p>As an agency customer, you can retrieve data on any of the student enrollments that have been created through Edvisor. Please
see the example on the right. Student enrollments are variously called &ldquo;applications&rdquo; or &ldquo;bookings&rdquo; in the industry.</p>

<p>The example to the right shows only how to fetch information for the courses, accommodations, and services attached to the student enrollment. For more details as to which fields are available on which objects, consult the schema documentation. </p>

<ul>
<li><a href='http://docs.edvisor.io/schema/studentenrollmentofferingcourseitem.doc.html'>StudentEnrollmentOfferingCourseItem</a></li>
<li><a href='http://docs.edvisor.io/schema/studentenrollmentofferingaccommodationitem.doc.html'>StudentEnrollmentOfferingAccommodationItem</a></li>
<li><a href='http://docs.edvisor.io/schema/studentenrollmentofferingserviceitem.doc.html'>StudentEnrollmentOfferingServiceItem</a></li>
</ul>

          <h1 id="errors">Errors</h1>

<p>Edvisor.io will respond with a 200 success code even if there are operational errors. This follows the GraphQL specification. All errors will be described in an <code class="prettyprint">errors</code> array in the response.</p>
<pre class="highlight json"><code><span class="err">#Sample</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">response</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"agencyCompany"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthenticated"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"locations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"line"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nt">"column"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"agencyCompany"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

          <h1 id="web-2-leads">Web 2 Leads</h1>

<h2 id="getting-started">Getting started</h2>

<p>Setting up a web2lead form on your website requires two steps.
First, you must have a form displaying what information you want to collect.
Second, you have to send that information to the Edvisor API. We will do that with Javascript.</p>

<p>Please refer to <a href="#form-data">Form Data</a> to find out how to structure your data.</p>

          <h2 id="form-setup">Form setup</h2>

<p><img alt="img" src="images/form.png" /></p>

<blockquote>
<p>Basic Form Setup</p>
</blockquote>
<pre class="highlight plaintext"><code>&lt;form id='edvisor-form'&gt;

  &lt;div&gt;
    &lt;label&gt;First Name *&lt;/label&gt;
    &lt;input id='edvisor-firstname' type='text' name='firstname' placeholder='Enter First Name' required /&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;label&gt;Last Name&lt;/label&gt;
    &lt;input id='edvisor-lastname' type='text' name='lastname' placeholder='Enter Last Name' /&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;label&gt;Email *&lt;/label&gt;
    &lt;input id='edvisor-email' type='email' name='email' placeholder='Enter Email' required/&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;label&gt;Message&lt;/label&gt;
    &lt;textarea id='edvisor-notes' name='notes' placeholder='Let us know what you think'&gt;&lt;/textarea&gt;
  &lt;/div&gt;

  &lt;button type='submit'&gt;Submit&lt;/button&gt;
&lt;/form&gt;
</code></pre>

<p>Here is a basic form. We gave this form an id(identification) of &lsquo;edvisor-form&rsquo;.</p>

<p>Inside this form we have several fields (First Name, Last Name, Email, Message), and also a submit button.</p>

<p>Each field is structured in the same way. There is a <strong>label</strong> and an <strong>input</strong> or <strong>textarea</strong> with a <strong>div</strong> around it.</p>

<p><img alt="img" src="images/field.png" /></p>

<p>The <strong>label</strong> is the text that shows above an input.</p>

<p><code class="prettyprint">&lt;label&gt; Text Here &lt;/label&gt;</code></p>

<p>The <strong>input</strong> is where the user can type information. The input below is saying that this is a <em>text</em> field and its name is <em>firstname</em></p>

<p><code class="prettyprint">&lt;input type=&#39;text&#39; name=&#39;firstname&#39; /&gt;</code></p>

<p>The <strong>placeholder</strong> is the text inside of the <strong>input</strong>, and it disappears when the user starts typing.</p>

<p><code class="prettyprint">&lt;input type=&#39;text&#39; name=&#39;firstname&#39; placeholder=&#39;This text shows inside the field&#39; /&gt;</code></p>

<p>Adding <strong>required</strong> into the field makes it required. They can&rsquo;t submit the form without filling in the field. An error message will pop up if they try.</p>

<p><code class="prettyprint">&lt;input type=&#39;text&#39; name=&#39;firstname&#39; required /&gt;</code></p>

<p><img alt="img" src="images/required.png" /></p>

<p>If you need help understanding HTML, here is some documentation:</p>

<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Introduction">Introduction to HTML</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms">How to make a form</a></li>
</ul>

          <h2 id="sending-the-data">Sending the data</h2>

<blockquote>
<p>Basic Javascript Setup</p>
</blockquote>
<pre class="highlight plaintext"><code>&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
  var edvisorFormSending = false;

  $('#edvisor-form').submit(function(event){

    $('#edvisor-message').remove();

    var formData = {
      'agencyId' : '123',
      'firstname' : $('#edvisor-firstname').val(),
      'lastname' : $('#edvisor-lastname').val(),
      'email' : $('#edvisor-email').val(),
      'notes' : $('#edvisor-notes').val(),
    }

    if(!edvisorFormSending) {

      edvisorFormSending = true;

      $.ajax({
        url: 'https://app.edvisor.io/api/v1/student?public_key=YOUR-KEY-HERE',
        data: JSON.stringify(formData),
        type:'PUT',
        contentType: 'application/json; charset=utf-8',
        processData: false
      })
        .done(function() {
          $('#edvisor-form').append('&lt;p id="edvisor-message"&gt;Form was submitted!&lt;/p&gt;');
          edvisorFormSending = false;
        })
        .fail(function(data) {
          $('#edvisor-form').append('&lt;p id="edvisor-message"&gt;Something went wrong!&lt;/p&gt;');
          console.log(data)
          edvisorFormSending = false;
        });

    };

    event.preventDefault();

  });
&lt;/script&gt;
</code></pre>

<p>This Javascript requires <strong>two</strong> things to work.</p>

<p>It needs to know your:</p>

<ol>
<li>agencyId (the number assigned to your office by Edvisor)</li>
<li>API key</li>
</ol>

<p>If you need help finding your agencyId, please go to <a href="#how-to-get-your-agencyid">How to get your agencyId</a>.</p>

<p>You can get your API Key by contacting us at support@edvisor.io</p>

<p>-</p>

<p>After gathering the required information. Please do the following:</p>

<ul>
<li>Find &rsquo;<em>agencyId</em>&rsquo; and replace &rsquo;<em>123</em>&rsquo; with your agencyId.</li>
<li>Find &rsquo;<em>YOUR-KEY-HERE</em>&rsquo; and replace it with the API key you were given.</li>
</ul>

<p>If you need help with Javascript, here is some documentation:</p>

<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide">Guide to Javascript</a></li>
</ul>

          <h2 id="how-to-get-your-agencyid">How to get your agencyId</h2>

<ol>
<li>Log into Edvisor</li>
<li>Go to your settings</li>
<li>If you have multiple offices, select the office you want.</li>
<li>Look for the <strong>ID</strong> field, that is your agencyId.</li>
</ol>

<p><img alt="agency" src="images/agencyId.png" /></p>

          <h2 id="style-your-form">Style your form</h2>
<pre class="highlight plaintext"><code>#edvisor-form {
  width: 300px;
  font-family: sans-serif;
  font-weight: 100;
  padding: 20px;
}
#edvisor-form div {
  margin-bottom: 15px;
}
#edvisor-form label {
  display: block;
  margin-bottom: 5px;
}
#edvisor-form input,
#edvisor-form textarea {
  width: 100%;
  padding-left: 5px;
  border-radius: 2px;
  border: 1px solid #dfe3e5;
  outline: 0;
}
#edvisor-form input {
  height: 35px;
}
#edvisor-form textarea {
  height: 100px;
}
#edvisor-form ::-webkit-input-placeholder {
  font-family: sans-serif;
  font-weight: 100;
}
#edvisor-form button {
  padding: 10px 20px;
  border-radius: 2px;
  border: 1px solid #dfe3e5;
  background-color: #fff;
  display: block;
  margin-left: auto;
}
</code></pre>

<p>The code to the right is the styles of the form above.</p>

<p>Place this into your css file or place it in <code class="prettyprint">&lt;style&gt;Code Here&lt;/style&gt;</code> and place it above the form.</p>

<p>If you need help styling a form, here is some documentation:</p>

<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/Styling_HTML_forms">How to style a form</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_started">Getting started with css</a></li>
</ul>

          <h2 id="code-snippit">Code Snippit</h2>
<pre class="highlight plaintext"><code>&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"&gt;&lt;/script&gt;

&lt;style&gt;
#edvisor-form {
  width: 300px;
  font-family: sans-serif;
  font-weight: 100;
  padding: 20px;
}
#edvisor-form div {
  margin-bottom: 15px;
}
#edvisor-form label {
  display: block;
  margin-bottom: 5px;
}
#edvisor-form input,
#edvisor-form textarea {
  width: 100%;
  padding-left: 5px;
  border-radius: 2px;
  border: 1px solid #dfe3e5;
  outline: 0;
}
#edvisor-form input {
  height: 35px;
}
#edvisor-form textarea {
  height: 100px;
}
#edvisor-form ::-webkit-input-placeholder {
  font-family: sans-serif;
  font-weight: 100;
}
#edvisor-form button {
  padding: 10px 20px;
  border-radius: 2px;
  border: 1px solid #dfe3e5;
  background-color: #fff;
  display: block;
  margin-left: auto;
}
&lt;/style&gt;

&lt;form id='edvisor-form'&gt;

  &lt;div&gt;
    &lt;label&gt;First Name *&lt;/label&gt;
    &lt;input id='edvisor-firstname' type='text' name='firstname' placeholder='Enter First Name' required /&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;label&gt;Last Name&lt;/label&gt;
    &lt;input id='edvisor-lastname' type='text' name='lastname' placeholder='Enter Last Name' /&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;label&gt;Email *&lt;/label&gt;
    &lt;input id='edvisor-email' type='email' name='email' placeholder='Enter Email' required/&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;label&gt;Message&lt;/label&gt;
    &lt;textarea id='edvisor-notes' name='notes' placeholder='Let us know what you think'&gt;&lt;/textarea&gt;
  &lt;/div&gt;

  &lt;button type='submit'&gt;Submit&lt;/button&gt;
&lt;/form&gt;

&lt;script&gt;
  var edvisorFormSending = false;

  $('#edvisor-form').submit(function(event){

    $('#edvisor-message').remove();

    var formData = {
      'agencyId' : '123',
      'firstname' : $('#edvisor-firstname').val(),
      'lastname' : $('#edvisor-lastname').val(),
      'email' : $('#edvisor-email').val(),
      'notes' : $('#edvisor-notes').val(),
    }

    if(!edvisorFormSending) {

      edvisorFormSending = true;

      $.ajax({
        url: 'https://app.edvisor.io/api/v1/student?public_key=YOUR-KEY-HERE',
        data: JSON.stringify(formData),
        type:'PUT',
        contentType: 'application/json; charset=utf-8',
        processData: false
      })
        .done(function() {
          $('#edvisor-form').append('&lt;p id="edvisor-message"&gt;Form was submitted!&lt;/p&gt;');
          edvisorFormSending = false;
        })
        .fail(function(data) {
          $('#edvisor-form').append('&lt;p id="edvisor-message"&gt;Something went wrong!&lt;/p&gt;');
          console.log(data)
          edvisorFormSending = false;
        });

    };

    event.preventDefault();

  });
&lt;/script&gt;
</code></pre>

<p>Here is the final code for the form above. After you add in your agencyId and API key as discussed in <a href="#sending-the-data">Sending the data</a>. You should be able to copy and paste this into your website.</p>

          <h2 id="form-googleplaceid">Form googlePlaceId</h2>

<h3 id="ajax-and-autocomplete-for-googleplaceid-fields">Ajax and Autocomplete for googlePlaceId fields</h3>
<pre class="highlight plaintext"><code>$("#your-field").autocomplete({
  source: function( request, response ) {
    $.ajax({
      url: 'https://app.edvisor.io/api/v1/google-place/search?public_key=APIKEY',
      type: 'GET',
      data: {
        query: request.term
      },
      success: function(data) {
        response(jQuery.map(data, function(item) {
          return {
            label: item.description,
            id: item.place_id
          };
        }));
      },
    });
  },
  select: function(event, ui) {
    var googleId = ui.item.id
    event.target.setAttribute('data-google', googleId)
  },
  change: function (event, ui) {
    if(ui.item == null || ui.item == undefined) {
      $(this).val("")
    }
  }
});

// prevent hitting the enter button on the google field and accidently submitting the form.
$("#your-field").keypress(function(event) {
  if (event.keyCode == 13) {
    event.preventDefault();
  }
});
</code></pre>

<p>If you want to have <strong>city</strong> or <strong>destinations</strong> on your form, you will need to do the following.</p>

<p>You will need to load in jQuery Ui if you don&rsquo;t have an autocomplete library in your code.</p>

<p><code class="prettyprint">
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css&quot;&gt;
&lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js&quot;&gt;&lt;/script&gt;
</code></p>

<p>The code to the right will check to see if what the user types into the selected field matches anything in our database, and if it does, it will show everything that matches in a dropdown. The user can then select an option from the dropdown. </p>

<p>Once the selection is over, it will store the Google Place Id into an attribute on the field called &lsquo;data-google&rsquo;. You can then select this by </p>

<p><code class="prettyprint">$(your-field).attr(&#39;data-google&#39;)</code></p>

<p>Below the ajax get, is a function to disable the enter key when inside the field. We found users were accidently submitting the form when using the auto complete.</p>

<p>Replace <strong>your-field</strong> with the id of your field.
Replace <strong>APIKEY</strong> with your Api key.</p>

<h3 id="how-googleplaceid-works">How googlePlaceId works</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"currentLocationGooglePlaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ChIJ--IExB6rOQcRZysfWJNymsk"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"studentLocationPreferences"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"googlePlaceId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ChIJ--IExB6rOQcRZysfWJNymsk"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Google place id&rsquo;s is a way to standardize locations around the world. They are used in &#39;currentLocationGooglePlaceId&rsquo; and &#39;studentLocationPreferences&rsquo;.</p>

<p>This is what a google place id looks like </p>

<p><code class="prettyprint">ChIJ--IExB6rOQcRZysfWJNymsk</code></p>

<p>For example Vancouver, BC, Canada is </p>

<p><code class="prettyprint">ChIJs0-pQ_FzhlQRi_OBm-qWkbs</code></p>

<p>For more documentation or if you want to find id&rsquo;s to send, please go to <a href="https://developers.google.com/places/place-id">Google&rsquo;s Place ID</a></p>

          <h2 id="form-data">Form Data</h2>

<p>This is what your data should look like when sending it to Edvisor.</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"studentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"agencyId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"nationalityId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"firstname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Biden"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joebiden@fakemail.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555-555-5555"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"birthdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-06-16T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"passportNumber"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"studentStatusId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here are some notes about the student..."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"accommodation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Homestay"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"budget"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"startMonth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"startYear"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"startDay"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"durationWeekAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hoursPerWeek"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amOrPm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currentLocationGooglePlaceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ChIJ--IExB6rOQcRZysfWJNymsk"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"isHighPriority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"studentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fk3k333"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"studentLocationPreferences"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"googlePlaceId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ChIJ--IExB6rOQcRZysfWJNymsk"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"studentCoursePreferences"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"English 101"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"studentSchoolPreferences"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Internation School"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"customPropertyValues"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"customPropertyFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"favorite-color"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customOptionSelections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Red"</span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
     </span><span class="nt">"customPropertyFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"best-friend-name"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Kenta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"studentCurrentPipelineStages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"studentPipelineStageId"</span><span class="p">:</span><span class="mi">1160</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="json-request-object">JSON Request Object</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agencyId</td>
<td>Yes</td>
<td>Number</td>
<td></td>
<td>The ID of the office you want this student to belong to. This can be found in the settings page of Edvisor.io.</td>
</tr>
<tr>
<td>ownerId</td>
<td>No</td>
<td>Number</td>
<td>NULL</td>
<td>The ID of the user we want to assign the student to. This can be found in the settings page of Edvisor.io. If set to NULL, the student will be left as unassigned.</td>
</tr>
<tr>
<td>nationalityId</td>
<td>No</td>
<td>Number</td>
<td>NULL</td>
<td>The Country ID of the nationality of the student.</td>
</tr>
<tr>
<td>firstname</td>
<td>Yes</td>
<td>String</td>
<td></td>
<td>The first name of the student.</td>
</tr>
<tr>
<td>lastname</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>The last name of the student.</td>
</tr>
<tr>
<td>email</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>The email of the student. Note: You can only have one student with the same email in your company.</td>
</tr>
<tr>
<td>phone</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>The phone number of the student.</td>
</tr>
<tr>
<td>address</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>The address of your student.</td>
</tr>
<tr>
<td>postalCode</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>The postal code of your student.</td>
</tr>
<tr>
<td>gender</td>
<td>No</td>
<td>String (M/F)</td>
<td>NULL</td>
<td>The gender of your student. Accepted values are &rsquo;M&rsquo; or &lsquo;F&rsquo;.</td>
</tr>
<tr>
<td>birthdate</td>
<td>No</td>
<td>String (YYYY-MM-DD)</td>
<td>NULL</td>
<td>The birthdate of your student. Format must be YYYY-MM-DD.</td>
</tr>
<tr>
<td>passportNumber</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>The passport number of the student.</td>
</tr>
<tr>
<td>studentStatusId</td>
<td>No</td>
<td>Number</td>
<td>NULL</td>
<td>The first stage in your student pipeline.</td>
</tr>
<tr>
<td>notes</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>Any notes you wish to keep with the student.</td>
</tr>
<tr>
<td>accommodation</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>Accommodation goals for the student.</td>
</tr>
<tr>
<td>budget</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>Budget information</td>
</tr>
<tr>
<td>startMonth</td>
<td>No</td>
<td>Number</td>
<td>NULL</td>
<td>The numerical value of the month the student wishes to start.</td>
</tr>
<tr>
<td>startYear</td>
<td>No</td>
<td>Number</td>
<td>NULL</td>
<td>The numerical value of the year the student wishes to start.</td>
</tr>
<tr>
<td>startDay</td>
<td>No</td>
<td>Number</td>
<td>NULL</td>
<td>The numerical value of the day the student wishes to start.</td>
</tr>
<tr>
<td>durationWeekAmount</td>
<td>No</td>
<td>Number</td>
<td>NULL</td>
<td>The number of weeks the student wishes to study for.</td>
</tr>
<tr>
<td>hoursPerWeek</td>
<td>No</td>
<td>Number</td>
<td>NULL</td>
<td>The number of hours per week the student wishes to study for.</td>
</tr>
<tr>
<td>amOrPm</td>
<td>No</td>
<td>String (AM/PM)</td>
<td>NULL</td>
<td>Whether the student wants to study in the AM or PM.</td>
</tr>
<tr>
<td>currentLocationGooglePlaceId</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>The Place ID provided by Google&rsquo;s <a href='https://developers.google.com/places/webservice/'>Places API</a>. This represents where the student is currently residing.</td>
</tr>
<tr>
<td>isHighPriority</td>
<td>No</td>
<td>Boolean</td>
<td>false</td>
<td>Whether the student should be marked as high priority.</td>
</tr>
<tr>
<td>studentNumber</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>Any external student number that you wish to store with the student.</td>
</tr>
<tr>
<td>studentLocationPreferences</td>
<td>No</td>
<td>Object[]</td>
<td>NULL</td>
<td>An array of Google Place IDs which represent the locations that the student wishes to study in.</td>
</tr>
<tr>
<td>studentLocationPreferences[].googlePlaceId</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>Google Place ID which represent the locations that the student wishes to study in.</td>
</tr>
<tr>
<td>studentCoursePreferences</td>
<td>No</td>
<td>Object[]</td>
<td>NULL</td>
<td>An array of course names representing the courses that the student wishes to be enrolled in.</td>
</tr>
<tr>
<td>studentCoursePreferences[].name</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>A course name representing the course that the student wishes to be enrolled in.</td>
</tr>
<tr>
<td>studentSchoolPreferences</td>
<td>No</td>
<td>Object[]</td>
<td>NULL</td>
<td>An array of school names representing the schools that the student wishes to be enrolled in.</td>
</tr>
<tr>
<td>studentSchoolPreferences[].name</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>A school name representing the school that the student wishes to be enrolled in.</td>
</tr>
<tr>
<td>customPropertyValues</td>
<td>No</td>
<td>Object[]</td>
<td>NULL</td>
<td>An array of custom property values to save with the student</td>
</tr>
<tr>
<td>customPropertyValues[].customPropertyFieldId</td>
<td>Yes</td>
<td>String</td>
<td>NULL</td>
<td>The Custom Property Field ID of the custom property you wish to save</td>
</tr>
<tr>
<td>customPropertyValues[].value</td>
<td>Yes</td>
<td>String</td>
<td>NULL</td>
<td>The value you want to save with this custom property. This is required ONLY if the custom property is not a dropdown</td>
</tr>
<tr>
<td>customPropertyValues[].customOptionSelections[]</td>
<td>Yes</td>
<td>String[]</td>
<td>NULL</td>
<td>This is an array of option selections. In the case of a dropdown field, you will only need to pass one value into this array. Note, this is ONLY required if the custom property is a dropdown</td>
</tr>
<tr>
<td>studentCurrentPipelineStage</td>
<td>No</td>
<td>Objecet[]</td>
<td>NULL</td>
<td>An array of pipeline stage ids representing the pipeline stages.</td>
</tr>
<tr>
<td>studentCurrentPipelineStage[].studentPipelineStageId</td>
<td>No</td>
<td>String</td>
<td>NULL</td>
<td>A pipeline stage ID represeting the pipeline stage.</td>
</tr>
</tbody></table>

          <h2 id="edvisor-fields">Edvisor Fields</h2>

<p><img alt="agency" src="images/student.png" />
<img alt="agency" src="images/goals.png" /></p>

          <h2 id="nationality">Nationality</h2>
<pre class="highlight plaintext"><code>["Andorra","United Arab Emirates","Afghanistan","Antigua and Barbuda","Anguilla","Albania","Armenia","Angola","Antarctica","Argentina","American Samoa","Austria","Australia","Aruba","Azerbaijan","Bosnia and Herzegovina","Barbados","Bangladesh","Belgium","Burkina Faso","Bulgaria","Bahrain","Burundi","Benin","Bermuda","Brunei","Bolivia","Bonaire, Sint Eustatius and Saba","Brazil","The Bahamas","Bhutan","Botswana","Belarus","Belize","Canada","Cocos (Keeling) Islands","Congo","Central African Republic","Congo","Switzerland","CÃƒÂ´te d'Ivoire","Cook Islands","Chile","Cameroon","China","Colombia","Costa Rica","Cuba","Cape Verde","CuraÃƒÂ§ao","Christmas Island","Cyprus","Czech Republic","Germany","Djibouti","Denmark","Dominica","Dominican Republic","Algeria","Ecuador","Estonia","Egypt","Eritrea","Spain","Ethiopia","Finland","Fiji","Micronesia","Faroe Islands","France","Gabon","United Kingdom","Grenada","Georgia","French Guiana","Guernsey","Ghana","Gibraltar","Greenland","Gambia","Guinea","Guadeloupe","Equatorial Guinea","Greece","Guatemala","Guam","Guinea-Bissau","Guyana","Hong Kong","Honduras","Croatia","Haiti","Hungary","Indonesia","Ireland","Israel","Isle of Man","India","Iraq","Iran","Iceland","Italy","Jersey","Jamaica","Jordan","Japan","Kenya","Kyrgyzstan","Cambodia","Kiribati","Comoros","Saint Kitts and Nevis","North Korea","South Korea","Kuwait","Cayman Islands","Kazakhstan","Laos","Lebanon","Saint Lucia","Liechtenstein","Sri Lanka","Liberia","Lesotho","Lithuania","Luxembourg","Latvia","Libya","Morocco","Monaco","Moldova","Montenegro","Madagascar","Marshall Islands","Macedonia","Mali","Myanmar","Mongolia","Macao","Northern Mariana Islands","Martinique","Mauritania","Montserrat","Malta","Mauritius","Maldives","Malawi","Mexico","Malaysia","Mozambique","Namibia","New Caledonia","Niger","Norfolk Island","Nigeria","Nicaragua","Netherlands","Norway","Nepal","Nauru","Niue","New Zealand","Oman","Panama","Peru","French Polynesia","Papua New Guinea","Philippines","Pakistan","Poland","Pitcairn","Puerto Rico","Palestine","Portugal","Palau","Paraguay","Qatar","RÃƒÂ©union","Romania","Serbia","Russia","Rwanda","Saudi Arabia","Solomon Islands","Seychelles","Sudan","Sweden","Singapore","Slovenia","Slovakia","Sierra Leone","San Marino","Senegal","Somalia","Suriname","South Sudan","Sao Tome and Principe","El Salvador","Sint Maarten (dutch Part)","Syria","Swaziland","Turks and Caicos Islands","Chad","Togo","Thailand","Tajikistan","Tokelau","Timor-Leste","Turkmenistan","Tunisia","Tonga","Turkey","Trinidad and Tobago","Tuvalu","Taiwan","Tanzania","Ukraine","Uganda","United States","Uruguay","Uzbekistan","Holy See (Vatican City State)","Saint Vincent and The Grenadines","Venezuela","British Virgin Islands","US Virgin Islands","Vietnam","Vanuatu","Wallis and Futuna","Samoa","Serbia","Yemen","Mayotte","South Africa","Zambia","Zimbabwe","United States Minor Outlying Islands","British Indian Ocean Territory"]
</code></pre>

<p>&lsquo;nationalityId&rsquo; will only accept a number. Use the index number from the array to the right.</p>

<p>If you want &ldquo;Andorra&rdquo; to be chosen, set</p>

<p><code class="prettyprint">{&#39;nationalityId&#39;: 1}</code></p>

<p>If you want &ldquo;Albania&rdquo; to be chosen, set </p>

<p><code class="prettyprint">{&#39;nationalityId&#39;: 6}</code></p>

          <h2 id="custom-fields">Custom Fields</h2>

<blockquote>
<p>Text or Date field</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"customPropertyValues"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
     </span><span class="nt">"customPropertyFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"best-friend-name"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Kenta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Dropdown field (case-sensitive)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"customPropertyValues"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"customPropertyFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"favorite-color"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customOptionSelections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Red"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Text and dropdown Field</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"customPropertyValues"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"customPropertyFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"favorite-color"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customOptionSelections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Red"</span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
     </span><span class="nt">"customPropertyFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"best-friend-name"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Kenta"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Custom properties allow you to setup and store any additional fields you want to with a student.</p>

<p><strong>Custom fields are unique to each individual office.</strong> <em>When creating 
new student with custom properties, you must ensure that the office you are assigning the student to has the custom properties that you wish to store with the student.</em></p>

<p>You can create custom fields in your <strong>Settings</strong> under the <strong>Agency</strong> tab.</p>

<p>There are 3 types of custom fields. Text/Dropdown/Date</p>

<p>Please be aware that <em>Dropdown</em> is case sensitive and that you must send the exact text.</p>

<p>When you create a Custom field, you will get a <em>Field ID</em>. Use this ID as your &lsquo;customPropertyFieldId&rsquo;. Please refer to the right to see how your data should be structured.</p>

<p><img alt="agency" src="images/customField.png" /></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
          </div>
      </div>
    </div>
  </body>
</html>
